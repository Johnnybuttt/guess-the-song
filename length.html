<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Guess The Song â€” Settings</title>
  <link rel="stylesheet" href="app.css">
</head>
<body>
<div class="container">
  <h1>ğŸµ Guess The Song ğŸµ</h1>

  <div class="card">
    <div class="status" style="margin-bottom: 24px;">Clip length</div>
    <div class="controls" id="lengths" style="justify-content: center;"></div>

    <div class="hr"></div>

    <div class="status" style="margin-bottom: 24px;">Song pool</div>
    <div class="controls" id="pool" style="justify-content: center;"></div>

    <div class="hr"></div>

    <div class="controls">
      <button class="secondary" onclick="history.back()" style="flex: 1;">â† Back</button>
      <button id="start" class="primary" style="flex: 1;">ğŸ® Start Game</button>
    </div>
  </div>
</div>

<script>
  // Clip length
  const lengths = [10, 30, 60];
  let selectedLen = Number(localStorage.getItem("clip") || 30);
  const lengthsEl = document.getElementById("lengths");

  function renderLengths() {
    lengthsEl.innerHTML = "";
    lengths.forEach(l => {
      const d = document.createElement("button");
      d.className = "pill" + (l === selectedLen ? " selected" : "");
      d.textContent = l + " seconds";
      d.onclick = () => { selectedLen = l; renderLengths(); };
      lengthsEl.appendChild(d);
    });
  }

  // Song pool
  const pools = [
    { key: "top", label: "Your songs" },
    { key: "random", label: "Random songs" }
  ];
  let selectedPool = localStorage.getItem("song_pool") || "top";
  const poolEl = document.getElementById("pool");

  function renderPools() {
    poolEl.innerHTML = "";
    pools.forEach(p => {
      const d = document.createElement("button");
      d.className = "pill" + (p.key === selectedPool ? " selected" : "");
      d.textContent = p.label;
      d.onclick = () => { selectedPool = p.key; renderPools(); };
      poolEl.appendChild(d);
    });
  }

  renderLengths();
  renderPools();

  document.getElementById("start").onclick = () => {
    localStorage.setItem("clip", selectedLen);
    localStorage.setItem("song_pool", selectedPool);
    window.location.href = "game.html";
  };
</script>
</body>
</html>
